<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>{{ site.title }}</title>
    {% if page.description %}<meta name="description" content="{{ page.description }}">{% endif %}
    <meta name="author" content="{{ site.author.name }}">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="{{ ASSET_PATH }}/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="{{ ASSET_PATH }}/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="{{ ASSET_PATH }}/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="{{ ASSET_PATH }}/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->
	<link rel="apple-touch-icon" sizes="57x57" href="{{BASE_PATH}}/images/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="{{BASE_PATH}}/images/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="{{BASE_PATH}}/images/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="{{BASE_PATH}}/images/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="{{BASE_PATH}}/images/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="{{BASE_PATH}}/images/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="{{BASE_PATH}}/images/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="{{BASE_PATH}}/images/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="{{BASE_PATH}}/images/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="{{BASE_PATH}}/images/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="{{BASE_PATH}}/images/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="{{BASE_PATH}}/images/favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="{{BASE_PATH}}/images/favicon/favicon-16x16.png">
	<link rel="manifest" href="{{BASE_PATH}}/images/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="{{BASE_PATH}}/images/favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <!-- atom & rss feed -->
    <link href="{{ BASE_PATH }}{{ site.JB.atom_path }}" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="{{ BASE_PATH }}{{ site.JB.rss_path }}" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
    
    <style type="text/css">
      div.canopy img { 
      	width:100%;
      	overflow:hidden;
      }
      div.canopy { 
      	width:100%;
      	overflow:hidden;
      }
    </style>
    
	<script type="text/javascript">
    	// from http://stackoverflow.com/a/979995
		var QueryString = function () {
		  // This function is anonymous, is executed immediately and 
		  // the return value is assigned to QueryString!
		  var query_string = {};
		  var query = window.location.search.substring(1);
		  var vars = query.split("&");
		  for (var i=0;i<vars.length;i++) {
			var pair = vars[i].split("=");
				// If first entry with this name
			if (typeof query_string[pair[0]] === "undefined") {
			  query_string[pair[0]] = pair[1];
				// If second entry with this name
			} else if (typeof query_string[pair[0]] === "string") {
			  var arr = [ query_string[pair[0]], pair[1] ];
			  query_string[pair[0]] = arr;
				// If third or later entry with this name
			} else {
			  query_string[pair[0]].push(pair[1]);
			}
		  } 
			return query_string;
		} ();
    </script>

  </head>

  <body>
  	<nav class="navbar navbar-inverse navbar-fixed-top">
  		<div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{{ HOME_PATH }}">{{ site.title }}</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
            {% assign pages_list = site.pages %}
            {% assign group = 'navigation' %}
            {% include JB/pages_list %}
          </ul>
          <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
          </form>
        </div><!-- /.navbar-collapse -->

  		</div>
		<div class="fixed-top">
			<div class="canopy {{ page.canopyStyle }}">
			  <img border="0" src="{{ BASE_PATH }}/images/fauxcabulary-canopy.png" />
			</div>
		</div>
  	</nav>
    <div id="wrap">
<!-- 
    	<div class="navbar-fixed-top">
      <nav class="navbar navbar-inverse collapse navbar-collapse" role="navigation">

      </nav>
    	</div>
-->
      <div class="container">
        {{ content }}
      </div>

    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2010 - {{ site.time | date: '%Y' }} {{ site.author.name }}
          <!-- with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a> -->
        </p>
      </div>
    </div>

    {% include JB/analytics %}


    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{{ ASSET_PATH }}/bootstrap/js/bootstrap.min.js"></script>
    
    <script type="text/javascript">
    	var imgHeight = 0;
    	var imgWidth = 1550;
    	var imgMinHeight = 0;
    	var imgScale = 1.0;
    	var docScroll = 0;
    	
    	function onBodyResized() {
    		imgHeight = $("div.canopy img").first().height();
    		imgWidth = $("div.canopy img").first().width();
    		imgScale = imgWidth / 1550;
    		imgMinHeight = imgScale * 188;

    		var bodyMarginTop = Math.round(
    			$("div.canopy").first().hasClass("canopy-full") ?
    			$("nav.navbar div.container").first().height() + imgHeight :  // enable scroll effect
    			$("nav.navbar div.container").first().height() + imgMinHeight // disable scroll effect
    		);
    		$("body").css("margin-top", bodyMarginTop + "px");
    		
    		var headerWidth = $("div.container").first().width();
    		var w = Math.round((headerWidth / 3.0 - 60.0) * imgScale);
    		$("table.siteIcons img").width(w);

    		onDocumentScroll();
    	}
    	
    	function onDocumentScroll() {
    		var amountToScroll = Math.round(
    			$("div.canopy").first().hasClass("canopy-full") ?
    			$(this).scrollTop() : // enable scroll effect
    			2000                  // disable scroll effect
    		);
			$("div.canopy").first().height(Math.max(imgHeight - amountToScroll, imgMinHeight) + "px");
    	}
    	
    	$(window).resize(function(){
    		onBodyResized();
    	});
    	$(document).ready(function(){
    		onBodyResized();
    	});
    	
    	$(window).scroll(function(){
    		onDocumentScroll();
    	});
    </script>
  </body>
</html>
